<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:security="http://www.springframework.org/schema/security"
	xsi:schemaLocation="http://www.springframework.org/schema/beans 
	   		http://www.springframework.org/schema/beans/spring-beans.xsd
			http://www.springframework.org/schema/security 
			http://www.springframework.org/schema/security/spring-security.xsd">
			
	<!-- configurar el contexto de acceso al servidor ldap -->
	<!-- El servidor LDAP embebido tiene ou=system, creado por defecto
	con el usuario "admin/secret" -->
    <bean id="contextSource" class="org.springframework.ldap.core.support.LdapContextSource" init-method="afterPropertiesSet">
    	<property name="url" value="ldap://localhost:9898" />
        <property name="base" value="dc=acme,dc=spring,dc=ldap,dc=com" />
        <property name="userDn" value="uid=admin,ou=system" />
        <property name="password" value="secret" />
    </bean>
    
    <!-- lo va a asociar a la plantilla de spring -->
    <bean id="ldapTemplate" class="org.springframework.ldap.core.LdapTemplate" init-method="afterPropertiesSet">
    	<constructor-arg ref="contextSource"/>
    </bean>
    
    <!--  lo va a asociar a la plantilla de spring y ésta será inyectada en nuestro servicio.  -->
    <bean id="personRepository" class="es.organization.ldap.engine.model.repository.PersonLdapRepository">
    	<constructor-arg ref="ldapTemplate"/>
    </bean>
    
    <!--  lo va a asociar a la plantilla de spring y ésta será inyectada en nuestro servicio.  
    <bean id="treeLdapRepository" class="es.organization.ldap.engine.model.repository.TreeLdapRepository">
    	<constructor-arg ref="ldapTemplate"/>
    </bean>    
    -->
</beans>